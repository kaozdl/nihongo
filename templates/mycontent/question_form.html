{% extends "base.html" %}

{% block title %}{% if question %}{{ _('Edit Question') }}{% else %}{{ _('Create Question') }}{% endif %} - JLPT Test Manager{% endblock %}

{% block extra_css %}
<style>
    .page-header {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 3rem 0;
        margin-bottom: 2rem;
        border-radius: 15px;
    }
    
    .form-card {
        border: none;
        border-radius: 15px;
        box-shadow: 0 5px 15px rgba(0,0,0,0.08);
    }
    
    .form-label {
        font-weight: 600;
        color: #333;
    }
    
    .btn-save {
        background: linear-gradient(135deg, #28a745 0%, #218838 100%);
        border: none;
        color: white;
        font-weight: 600;
        padding: 12px 30px;
        border-radius: 10px;
        transition: transform 0.3s ease;
    }
    
    .btn-save:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(40, 167, 69, 0.4);
        color: white;
    }
    
    .section-divider {
        border-top: 2px solid #667eea;
        margin: 2rem 0;
        position: relative;
    }
    
    .section-divider::before {
        content: attr(data-title);
        position: absolute;
        top: -12px;
        left: 20px;
        background: white;
        padding: 0 10px;
        color: #667eea;
        font-weight: 600;
    }
</style>
{% endblock %}

{% block content %}
<div class="container">
    <div class="page-header text-center">
        <h1>
            <i class="bi bi-{% if question %}pencil-square{% else %}plus-circle{% endif %}"></i>
            {% if question %}{{ _('Edit Question') }}{% else %}{{ _('Create New Question') }}{% endif %}
        </h1>
    </div>
    
    <div class="row justify-content-center">
        <div class="col-lg-10">
            <div class="card form-card">
                <div class="card-body p-4">
                    <form method="POST">
                        <!-- Question Text -->
                        <div class="mb-4">
                            <label for="question_text" class="form-label">
                                <i class="bi bi-chat-square-text"></i> {{ _('Question Text') }} *
                            </label>
                            <textarea class="form-control" 
                                      id="question_text" 
                                      name="question_text" 
                                      rows="3" 
                                      required>{% if question %}{{ question.question_text }}{% endif %}</textarea>
                        </div>
                        
                        <!-- Optional Media -->
                        <div class="row mb-4">
                            <div class="col-md-6">
                                <label for="question_image" class="form-label">
                                    <i class="bi bi-image"></i> {{ _('Image URL') }} ({{ _('optional') }})
                                </label>
                                <input type="url" 
                                       class="form-control" 
                                       id="question_image" 
                                       name="question_image" 
                                       value="{% if question and question.question_image %}{{ question.question_image }}{% endif %}">
                            </div>
                            <div class="col-md-6">
                                <label for="question_audio" class="form-label">
                                    <i class="bi bi-volume-up"></i> {{ _('Audio URL') }} ({{ _('optional') }})
                                </label>
                                <input type="url" 
                                       class="form-control" 
                                       id="question_audio" 
                                       name="question_audio" 
                                       value="{% if question and question.question_audio %}{{ question.question_audio }}{% endif %}">
                            </div>
                        </div>
                        
                        <div class="section-divider" data-title="{{ _('Answer Options') }}"></div>
                        
                        <!-- Answers -->
                        <div class="row mb-4">
                            <div class="col-md-6 mb-3">
                                <label for="answer_1" class="form-label">
                                    <span class="badge bg-secondary">1</span> {{ _('Answer 1') }} *
                                </label>
                                <input type="text" 
                                       class="form-control" 
                                       id="answer_1" 
                                       name="answer_1" 
                                       value="{% if question %}{{ question.answer_1 }}{% endif %}" 
                                       required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="answer_2" class="form-label">
                                    <span class="badge bg-secondary">2</span> {{ _('Answer 2') }} *
                                </label>
                                <input type="text" 
                                       class="form-control" 
                                       id="answer_2" 
                                       name="answer_2" 
                                       value="{% if question %}{{ question.answer_2 }}{% endif %}" 
                                       required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="answer_3" class="form-label">
                                    <span class="badge bg-secondary">3</span> {{ _('Answer 3') }} *
                                </label>
                                <input type="text" 
                                       class="form-control" 
                                       id="answer_3" 
                                       name="answer_3" 
                                       value="{% if question %}{{ question.answer_3 }}{% endif %}" 
                                       required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="answer_4" class="form-label">
                                    <span class="badge bg-secondary">4</span> {{ _('Answer 4') }} *
                                </label>
                                <input type="text" 
                                       class="form-control" 
                                       id="answer_4" 
                                       name="answer_4" 
                                       value="{% if question %}{{ question.answer_4 }}{% endif %}" 
                                       required>
                            </div>
                        </div>
                        
                        <!-- Correct Answer -->
                        <div class="mb-4">
                            <label for="correct_answer" class="form-label">
                                <i class="bi bi-check-circle"></i> {{ _('Correct Answer') }} *
                            </label>
                            <select class="form-select" id="correct_answer" name="correct_answer" required>
                                <option value="">{{ _('Select correct answer...') }}</option>
                                <option value="1" {% if question and question.correct_answer == 1 %}selected{% endif %}>1</option>
                                <option value="2" {% if question and question.correct_answer == 2 %}selected{% endif %}>2</option>
                                <option value="3" {% if question and question.correct_answer == 3 %}selected{% endif %}>3</option>
                                <option value="4" {% if question and question.correct_answer == 4 %}selected{% endif %}>4</option>
                            </select>
                        </div>
                        
                        <div class="section-divider" data-title="{{ _('Bilingual Explanations') }}"></div>
                        
                        <!-- Explanations -->
                        <div class="mb-4">
                            <label for="explanation_en" class="form-label">
                                <i class="bi bi-translate"></i> {{ _('Explanation (English)') }}
                            </label>
                            <textarea class="form-control" 
                                      id="explanation_en" 
                                      name="explanation_en" 
                                      rows="3">{% if explanation_en %}{{ explanation_en }}{% endif %}</textarea>
                            <div class="form-text">{{ _('Provide an explanation of why this answer is correct (in English)') }}</div>
                        </div>
                        
                        <div class="mb-4">
                            <label for="explanation_es" class="form-label">
                                <i class="bi bi-translate"></i> {{ _('Explanation (Espa√±ol)') }}
                            </label>
                            <textarea class="form-control" 
                                      id="explanation_es" 
                                      name="explanation_es" 
                                      rows="3">{% if explanation_es %}{{ explanation_es }}{% endif %}</textarea>
                            <div class="form-text">{{ _('Provide an explanation of why this answer is correct (in Spanish)') }}</div>
                        </div>
                        
                        <!-- Form Actions -->
                        <div class="mt-4 pt-3 border-top">
                            <button type="submit" class="btn btn-save">
                                <i class="bi bi-check-circle"></i> {% if question %}{{ _('Update Question') }}{% else %}{{ _('Create Question') }}{% endif %}
                            </button>
                            <a href="{{ url_for('mycontent.questions') }}" class="btn btn-outline-secondary ms-2">
                                <i class="bi bi-x-circle"></i> {{ _('Cancel') }}
                            </a>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

